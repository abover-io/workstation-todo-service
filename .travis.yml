sudo: required
services:
- docker
before_script:
- echo $COOKIE_SECRET2
- docker swarm init
script:
- docker stack deploy --compose-file=docker-compose.dev.yml fancy-todo-api
after_success:
- docker exec $(docker ps -q -f name=fancy-todo-api_api) yarn test
env:
  global:
  - secure: OXT1Wu5PosqS1PpZO/4Knr67Uvjhq0PABSI6lmXTru37GowhnRjJx7kpdeIh0N4tquF0nPDkqb+pPjsIJy/mjNUPYbmIDXKmELiMFHLIdcJbZh6ObQl9WKz6yp5NFpnGzlu48ipM0rZdea+kyjUb/SluHQ9FMSmJQL+Q21KS96p7EIfhSTvBYjMMyLhZjI2pA+GXP+PIgi8MlBefNSkBhPYXY71P0HLGZAVzvIeBSSGpKbrYBIgG7wyMN54DUiH+TRfC3lWRW4GPNBfhpDNxvhXh67lFLl0W4sE/mhiTX5X8oY3sJBw8DC1c46STG/SF6YwbADGf32R3MeIhU0DqY4GNFspti3WJ+T8fzf9Tj3pem+xeERGz5gyp6M3Ge0h61y0j+/WP2UyFFLIBh5TGZkMc2ybeDlxLXJ+Fnu+iHpK5glmKBUev5mnhqkla8H2kps9HliQtP7rDz1x64xWbKr5+aEKcwfaBsN7zt5CP3dnVzWh6YULNcFK+M0p10L99T6oO1Tm2iBNBTscFGZTlM3LhRQU1KPD76Z4YZkJTMoriwUw0quWgVjye9ATBYUzl2SiUqEr2KpiKwzuSxtb1F7wpXOF0qx3l1NrC6CT6ZaAeNrPASSZFqCTYqJ/UXqqNdtM8gGFVnt2emBg7YEZ1xYN6JL53dE1G8hlUbHHjIsE=
  - secure: VHwjXYS+jO11SL+3V9E32bP5XoFXDn5TeWkUcHegEuHeuQvToGZenaSgkEH6ZxXzZeP4nhk3BX/7P7HcwKkQbbMzQPyIcQD5pF9Vd9LulN8M7xSHQK/a/hkKOlM3D/puDDWsTfRf6viZN6QjUaIHgdH987ehB7PG+2UprH0uq7+JfvaK+sHTzVyLUJjArvr1vwtGxbbQwaMELSTmxXJBX7x8yKfo0FK28VKcGZkVD6Nn6jSZhT8OIpP+nqqy/ITl7rMHmem6oR1fIQ0TK4DbgFA8fA2hAG4FEvFgp0uMg0JQR4H5Ft0JYYZ+QIFXEQ8xMipknPk3MCDCg92T2t39nggWon/CQfkW3KZmv+IYJ9OVSnV4tlJCL1MjxrvTLVdK7wksxSR8w917WDwGLUOWmpcgqKipZItneoQY4Yo/mJ7hpSFHLZEhg+9TLNiDZtjqAcO5i4X5PU5JIarfVoPrFEji0Bp7zGZRmEd7GW95js1WY8nn5rnor6J1+/12kqqTHiUbT/09tkU5ziAzf8qf4bAaxgK52o1xaCnKp1BApwxKUyerJmnhIL4Si2huulDe26sT7eMe0E43cdB0x+9XNWq7Kdj+dXvAzKeDTmIbhT4qhS4NlInl/EpTmoTAEeqVRjXKjajnHi6/I6TmGjLfyzy6zmE09wlFtkYoXEnVODs=
  - secure: Jodf/fdYCT8sMoep+QdEkZlbZZ/G2bFHsmlOxS+I/79V0kfWtwDNVkOctO88A7HjCXNzTsELp2iNZBzKpq4dOj0izkRBXF40op79alySeZTyeQGFTPvtEfVm+IXNBu0fF9oO74tOdpTh2qB6HDTN5Nyr5tYKSJ2l306dUiIAcf+pV9XropGtm3wmJn666E1yagVY1xbKhRwwtr72nPLyx3Wh4+D5vF8fAutkbluJP33aNXxDwh6861KWBXtRhnpErYbFg9G/FsO89D8YNkDuYgeAOt8AZMeSrQCkm6j/QgeLr2pXRWAgu+Mrl2MdAxQAFcYSc2H77f5+SeXgtKFgLO5o/Cg1LiQJfSwDo7QvYhC4yXJvLCnK0PuBHtHTVtS+GzSliTrFh6RSjv2myJDOveC1RT8FPZesd0scc9ujtRRF0rmelqgQTYChckL/frD+dMOrqtic5IcyWwI3uZxnXa/hsiCZ+aY/aDLqCpzY1dpABJ6hMI55uCecnIIyMGe/EQcPmaswBLUp209HcslVE3859KfrBRK6MlCLw/Zq65BndRoft5r77NNWZtq2dn4fUNY9p/lMkXsld7WVNr4U5skNcPljiH1FWKXsAolon9f2TN0QDtqn8h8gv2YWLYclDvG3bJ6vhFntwaSLl+8znq8au/CMsHQeNlHZCRgrbz4=
  - secure: j6YOxiBG6V3xWBrknl5Yezf2EsmT7/qhHlVUu8B4ypo5PBT05Cl7IYTnndXOK7KyuTVXBTbSDzfh+tSVMLWi5zpcWeIY1x+3wPib6BgqJsHarPF8wk+4YHTBkBrZl0UZ62GLmG/STkRbs2jX6FLN89DxsGy+NyvZ3vG5SlhBr3hIAeRvcrj3FPJ0JDddd2NpX76N2sXan8LlLZw0SUGb7fIySLrJeZnJk5oWE38dOk2+Ft2346aZI/ZQlukHoTs2XT4RVuqMYplRp5OYme5DhtxLzKEfL/e6bpUwxGyLxRAzdrwSllXDic73aR3XzEknU9gGbSn1KIfMHWnc9ZDeYQofbt79RQWhUsWS70C5euP0+3tIAs2OnkKPoXgZkm6sb12bBXwr3Pxk7dF2gCQNC7rOwf3blZ5mK0Wj5SXSXIPnsLpsbrKsI6Sn+/wuJ3lLajMhH7lQ2x/ZVXYkqG+LZg2aC6xug8VngitYb0fWZk+dsO3IPe5DYeXJsOx0LjGgW7rTaLUVpNMY4Iy5boWossUskCYpbH9MbrlYolUNaDO81eEQ1bAGLfJyAqF1QJun6tiGIelFTxezBexEYvwGOtvw2QCbZTFE1gZpkwuRqqNAG2RJSmq0L1v1m/qw3OAhvmJy5MGsGurHRfsC2bQ7sdqULSNRAcrn/FP5XSKTGCs=
  - secure: OMj2ngjFgdemnZg8vVqQf9l/fIMmVdMM7wUEyD9R/fKcrQ/zUaBUOCXhB0p9LBO2s5SIgiERmKFRwiv30F7HV0zAxPYIltwuXCxnLWHS+ijXG8TvKdL68z/J/hJJQmEl18cxo8euBTFTojwPT0ag7qQmV6yg+AeRFxcr1YCNE/QHErh1w49DQXSA53VRNGkZRuL8nJyzEZtB28dqXn3c1meWX4Isxd77YghAqpmp0MRddRQ74cBITeZEeDXn5CmmYn4sjsLk5ug2av1dTIsAHJz5aacH4y4HPw3SwU8+dEdXU444w8T1MhqOrIJV4A3wZz3rKFbmdni4hRdZo6y60Sx/Fm63oMpw9BrJbK5NX4G5lsRs29xuLdz9C9tZ/9fJR+dWYMKVXpOSUgb2f9KQxJTzGOubbpDz6YvynMwW4D4TSr7bLm3ldRC0PfpPaS7B92xC+jQEM8T1QK1Mi2TWCuUDZxWro0GGbfnWq9UB1kX9D1aIEyC0J5o64JTxF19NjUzTplWWNILrqAr4VyV9iTTH0GvRJu44GdZj6x/RmCsICsOZZy8bDwZQXatUBBOaqzvJghfylPzvoe3U20JyLCeFUwq697I67PFM30B59KPtM4IxNEqBqzpTPtvWLY3ZJkig1nIdeXMuNftNfz0UqmukpENRF5mw+a8t3Mq+pxQ=
